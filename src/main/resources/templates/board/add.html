<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시글 작성</title>
    <link th:href="@{/css/bootstrap.min.css}"
          href="../../css/bootstrap.min.css" rel="stylesheet">
    <script src="../../jquery/jquery-3.7.0.min.js"></script>
    <!--<script type="text/javascript" src="../../js/bootstrap.js"></script>-->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.css" rel="stylesheet">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.js"></script>

    <!-- include summernote css/js-->
    <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>
    <script src="../../js/summernote/summernote-ko-KR.js"></script>
</head>
<style>
    .container {
        max-width: 560px;
    }

    .field-error {
        border-color: #dc3545;
        color: #dc3545;
    }

    input {
        margin: 4px;
    }

    @font-face {
        font-family: 'SUITE-Regular';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2304-2@1.0/SUITE-Regular.woff2') format('woff2');
        font-weight: 400;
        font-style: normal;
    }
</style>


<script>
    $(document).ready(function () {
        $('#summernote').summernote({
            placeholder: '내용',
            minHeight: 200,
            maxHeight: null,
            focus: true,
            lang: 'ko-KR',
            height: 500,                 // 에디터 높이
            lang: "ko-KR"					// 한글 설정
        });
    });

    /**
     * 이미지 파일 업로드
     */
    function uploadSummernoteImageFile(file, el) {
        data = new FormData();
        data.append("file", file);
        $.ajax({
            data: data,
            type: "POST",
            url: "/uploadSummernoteImageFile",
            contentType: false,
            enctype: 'multipart/form-data',
            processData: false,
            success: function (data) {
                $(el).summernote('insertImage', data.url);
            }
        });
    }

    $("div.note-editable").on('drop', function (e) {
        for (var i = 0; i < e.originalEvent.dataTransfer.files.length; i++) {
            uploadSummernoteImageFile(e.originalEvent.dataTransfer.files[i], $("#summernote")[0]);
        }
        e.preventDefault();
    });
</script>
<body>
<h2 style="text-align: center;">글 작성</h2><br><br><br>

<div class="container" style="margin: auto;">
    <form method="post" th:action th:object="${item}">
        <label for="name">제목</label>
        <input th:errorclass="field-error" id="name" type="text" name="name" th:field="*{name}" style="width: 20%;"
               placeholder="제목"/><br>
        <div class="field-error" th:errors="*{name}">제목 오류</div>
        <label for="writer">작성자</label>
        <input th:errorclass="field-error" id="writer" type="text" name="writer" th:field="*{writer}"
               style="width: 40%;" placeholder="작성자"/>
        <div class="field-error" th:errors="*{writer}">작성자 오류</div>
        <br><br>
        <div class="note-editable">
            <textarea id="summernote" name="content"></textarea>
        </div>
        <button class="btn btn-primary" type="submit" style="float: right; margin-top: 3px;">등록</button>
    </form>
</div>
</body>
</html>
